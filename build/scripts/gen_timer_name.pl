#!/usr/bin/perl
# generate msg name strings correcponsing to msgIds
# Shweta. Oct 2010
$file=shift;
if (!defined($file))
{
  print "usage: $0 bs_tables.h";
  exit;
}
open(IN, "<$file") || die "cannot open $file";

my $now = localtime time;
print "/* generated by $0 on $now */\n";
print "#include \"basic_types.h\"\n";
# include bs_tables.h to ensure that prototype matches with generated stuff */
print "#include \"bs_tables.h\"\n"; 
print "typedef struct s_TimerNameMap {\n  TimerName id;\n  const String50 name;\n} TimerNameMap;\n";
print "const TimerNameMap c_TimerNameTab[] =\n";
print "{\n";

while (<IN>)
{
  if (/(TIMERNAME_.*?\b)/)
  {
    $timerType = $1;
    $timerType =~ s/[\s]//g;
    printf "  {$timerType, %30s},\n", "\"$timerType\"";
  }
}

printf "  {0, %30s}\n", "\"\"";
print "};\n";
close IN;

print "\n";
print "inline const UINT8* getTimerName1(IN TimerName timerType)\n";
print "{\n";
print "  return &c_TimerNameTab[timerType].name[0];\n";
print "}\n\n";
