# generates strings for enum values: typedef enum e_EventType

$h_file=shift;# bs_tables.h

open(IN, "<", $h_file)  or die "Can't open $h_file: $!";
# search for enums like EVENTTYPE_RRCCONNREQ, and generate a string for them

my $now = localtime time;
print "/* generated by $0 on $now */\n";
print "#include \"bs_tables.h\"\n";
print "#include \"ueh_fdecl.h\"\n";
print "const char *uehEventName[] = {\n";
my $count = 1;
while (<IN>)
{
  $line = $_;
  $start = 1 if ($line =~ /typedef enum e_EventType/);
  if ($start eq 1)
  {
    if($line =~ /EVENTTYPE_(.*)\b/) 
    {
      if( $count ne 1)
      {
        print "\,\n";
      }
      $word = $1;
      $word =~ s/(.*)=(.*)/$1/;
      $word =~ s/\n//;
      $word =~ s/\s//;
      $word =~ s/,//;
      $word =~s/\/\*.*//;
      print "    [EVENTTYPE_$word] = \"$word\"";  
      $count++;
    }
  }
  $start = 0 if ($line =~ /\}/); 
  next;
}

print  "\n};\n"; # function

print  "const char *uehGetEventName(UINT8 event)\n";
print  "{ return uehEventName[event]; }\n";
close(IN);
